<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <title>js practice</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
      $(function() {
        $('#btn').on('click', function() {
          $('#warning').empty();
          var
            getName       = $('#name').val(),
            getUrl        = $('#url').val(),
            errorList     = [],
            error         = false,
            setName       = '',
            setUrl        = '',
            setList       = $('.link').find('a'),
            setListLength = setList.length;

          if(getName == '') {
            errorList.push('リンク名');
            error = true;
          };
          if(getUrl == '') {
            errorList.push('URL');
            error = true;
          };
          if(error) {
            setError(errorList, '未入力');
            return;
          };
          for(var i = 0; i < setListLength; i++) {
            setName = setList.eq(i).text();
            setUrl = setList.eq(i).attr('href');
            if(getName === setName) {
              errorList.push('リンク名');
              error = true;
            };
            if(getUrl === setUrl) {
              errorList.push('URL');
              error = true;
            };
          };
          if(error) {
            setError(errorList, '重複');
            return;
          };
          $('.link').append($('<P>').append($('<a>').attr('href', getUrl).text(getName)));
        });
        function setError(list, kind) {
          var
            length    = list.length,
            errorText = '',
            i;

          for(i = 0; i < length; i++) {
            if(i > 0) {
              errorText += '・';
            };
            errorText += list[i];
          };
          switch(kind) {
            case '未入力':
              errorText += 'を入力してください';
              break;
            case '重複':
              errorText += 'はすでに登録されています。';
              break;
          };
          $('#warning').text(errorText).css('color', 'red');
        };
      });
    </script>
  </head>
  <body>
    <section class="form">
      <form action="#" method="POST">
        <p>
          <label for="name">リンク名</label><br>
          <input id="name" type="text" name="name"><br>
        </p>
        <p>
          <label for="url">URL</label><br>
          <input id="url" type="url" name="url"><br>
        </p>
        <p>
          <input id="btn" type="button" name="btn" value="リンク追加">
        </p>
      </form>
    </section>
    <section id="warning" style="width: 100%; height: 50px;"></section>
    <section class="link"></section>
  </body>
</html>